<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>居酒屋 えむら｜須坂駅前の居酒屋</title>
  <meta name="description" content="須坂駅前の居酒屋 えむら。旬の食材と地酒をご用意。ご予約はお電話で。" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="theme-color" content="#0a0a0a" />
  <link rel="canonical" href="https://m3adam.github.io/izakaya-site/" />

  <!-- OGP / Twitter Card -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="居酒屋 えむら" />
  <meta property="og:description" content="須坂駅前の居酒屋 えむら。旬の食材と地酒をご用意。ご予約はお電話で。" />
  <meta property="og:image" content="https://m3adam.github.io/izakaya-site/images/building/entrance.jpg" />
  <meta property="og:site_name" content="居酒屋 えむら" />
  <meta property="og:locale" content="ja_JP" />
  <meta property="og:url" content="https://m3adam.github.io/izakaya-site/" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Shippori+Mincho&family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">

  <!--
  LCP: hero 先読み（avif が無い場合のフォールバック用に jpg も）
  <link rel="preload" as="image" href="./images/hero.avif" imagesrcset="./images/hero-1280.avif 1280w, /images/hero-1920.avif 1920w, /images/hero-2560.avif 2560w" imagesizes="100vw" fetchpriority="high">
  <link rel="preload" as="image" href="./images/hero.jpg" fetchpriority="high">
  -->

  <!-- PWA（任意だが設置） -->
  <link rel="manifest" href="./manifest.webmanifest">

  <meta name="google-site-verification" content="ErvK5HOZSzQBInb9iKeDvh-IyXCg9e3mYFpg6Xg-Njg" />

  <style>
    :root{
      --bg:#0a0a0a; --surface:#111111; --text:#f8f9fa; --muted:#a1a1aa;
      --brand:#eab308; --accent:#dc2626; --max:1200px;
      --japan-red:#b91c1c; --japan-gold:#d97706; --japan-paper:#fafaf9;
      --japan-ink:#1f2937; --japan-sakura:#fce7f3;
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth; scroll-padding-top:80px}
    body{
      margin:0; font-family:'Noto Sans JP', system-ui, -apple-system, Roboto, sans-serif;
      background:var(--bg); color:var(--text); line-height:1.7; overflow-x:hidden;
      background-image:
        radial-gradient(circle at 20% 80%, rgba(185, 28, 28, 0.08) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(217, 119, 6, 0.08) 0%, transparent 50%);
    }
    a{color:inherit; text-decoration:none}
    img{max-width:100%; height:auto; display:block}
    .container{max-width:var(--max); margin-inline:auto; padding:clamp(16px,3vw,24px)}

    /* Skip link */
    .skip{position:absolute; left:-9999px; top:auto}
    .skip:focus{left:16px; top:10px; background:#000; color:#fff; padding:10px 12px; border-radius:8px; z-index:10000}

    /* Header */
    header{position:sticky; top:0; background:rgba(10,10,10,.95); backdrop-filter:blur(20px); border-bottom:1px solid rgba(255,255,255,.1); z-index:1000; transition:all .3s ease}
    header.scrolled{background:rgba(10,10,10,.98); border-bottom-color:rgba(255,255,255,.15)}
    nav{display:flex; align-items:center; justify-content:space-between; gap:16px; padding:1rem 0}
    .brand{display:flex; align-items:center; gap:16px; font-weight:700; transition:transform .3s ease}
    .brand:hover{transform:translateY(-2px)}
    .brand__logo{inline-size:48px; block-size:48px; border-radius:50%; background:linear-gradient(135deg, var(--japan-red), var(--japan-gold)); box-shadow:0 8px 32px rgba(217,119,6,.3); position:relative; overflow:hidden}
    .brand__logo::before{content:""; position:absolute; inset:0; margin:auto; width:22px; height:22px; background:rgba(255,255,255,.18); border-radius:50%}
    .nav__links{display:flex; gap:32px; flex-wrap:wrap; align-items:center}
    .nav__links a{position:relative; padding:.5rem 0; font-weight:500; transition:all .3s ease; opacity:.85}
    .nav__links a:hover{opacity:1; transform:translateY(-2px)}
    .nav__links a::after{content:""; position:absolute; left:0; bottom:-4px; width:100%; height:2px; background:linear-gradient(90deg, var(--brand), var(--japan-red)); transform:scaleX(0); transition:transform .4s cubic-bezier(.4,0,.2,1); transform-origin:right; border-radius:1px}
    .nav__links a:hover::after{transform:scaleX(1); transform-origin:left}

    /* Hero */
    .hero{position:relative; text-align:center; color:var(--text); min-height:100vh; display:flex; align-items:center; justify-content:center; content-visibility:auto; contain-intrinsic-size: 1000px}
    .hero__media{position:absolute; inset:0; z-index:1}
    .hero__media img{width:100%; height:100%; object-fit:cover; filter:brightness(.45) contrast(1.08)}
    .hero__overlay{position:absolute; inset:0; background:linear-gradient(135deg, rgba(0,0,0,.55) 0%, rgba(185,28,28,.2) 50%, rgba(0,0,0,.9) 100%); z-index:2}
    .hero__inner{position:relative; z-index:3; padding:0 1rem; max-width: 900px}
    h1{font-size:clamp(40px,8vw,72px); letter-spacing:.03em; margin:0 0 1.2rem; font-family:'Shippori Mincho',serif; color:#fff}
    @supports(-webkit-background-clip:text){
      h1{background:linear-gradient(135deg,#ffffff 0%,#fbbf24 50%,#f59e0b 100%); -webkit-background-clip:text; -webkit-text-fill-color:transparent}
    }
    .hero p{max-width:680px; color:var(--muted); margin:0 auto 2rem; font-size:1.15rem; line-height:1.85}
    .cta{display:inline-flex; align-items:center; gap:12px; background:linear-gradient(135deg, var(--accent), #b91c1c); color:#fff; border:0; border-radius:50px; padding:16px 28px; font-weight:700; font-size:1.05rem; transition:all .3s cubic-bezier(.4,0,.2,1); box-shadow:0 8px 32px rgba(220,38,38,.3); position:relative; overflow:hidden}
    .cta::before{content:""; position:absolute; top:0; left:-100%; width:100%; height:100%; background:linear-gradient(90deg, transparent, rgba(255,255,255,.22), transparent); transition:left .5s}
    .cta:hover::before{left:100%}
    .cta:hover{transform:translateY(-3px); box-shadow:0 16px 48px rgba(220,38,38,.4)}
    .cta--secondary{background:linear-gradient(135deg, var(--brand), #d97706); box-shadow:0 8px 32px rgba(217,119,6,.3); color:#111}

    section{padding-block:clamp(60px,8vw,100px); content-visibility:auto; contain-intrinsic-size: 800px}
    h2{font-size:clamp(32px,5vw,48px); margin-bottom:1.3rem; font-family:'Shippori Mincho',serif; color:#fff; text-align:center}
    @supports(-webkit-background-clip:text){ h2{background:linear-gradient(135deg,#ffffff 0%,#fbbf24 100%); -webkit-background-clip:text; -webkit-text-fill-color:transparent} }
    .lead{color:var(--muted); margin:0 auto 2.4rem; text-align:center; font-size:1.08rem; max-width:620px}

    .grid{display:grid; gap:32px}
    .grid--2{grid-template-columns:1fr}
    @media(min-width:768px){ .grid--2{grid-template-columns:1fr 1fr; gap:48px} }

    .card{background:rgba(17,17,17,.82); border:1px solid rgba(255,255,255,.1); border-radius:24px; overflow:hidden; transition:all .4s cubic-bezier(.4,0,.2,1); backdrop-filter:blur(18px); position:relative}
    .card::before{content:""; position:absolute; inset:0; background:linear-gradient(135deg, rgba(255,255,255,.05) 0%, transparent 50%); opacity:0; transition:opacity .3s ease}
    .card:hover::before{opacity:1}
    .card:hover{transform:translateY(-6px); box-shadow:0 24px 64px rgba(0,0,0,.4); border-color:rgba(217,119,6,.3)}
    .card__body{padding:28px}
    .card img{transition:transform .4s ease}
    .card:hover img{transform:scale(1.05)}

    .menu-item{display:flex; justify-content:space-between; padding:16px 0; border-bottom:1px dashed rgba(255,255,255,.2); transition:all .3s ease}
    .menu-item:hover{border-bottom-color:var(--brand); transform:translateX(6px)}
    .menu-item__name{font-weight:600}
    .menu-item__price{color:var(--brand); font-weight:700; font-size:1.08rem}

    /* Menu search */
    .searchbar{display:flex; gap:8px; align-items:center; border:1px solid rgba(255,255,255,.15); border-radius:999px; padding:8px 12px; max-width:420px; margin:0 auto 16px}
    .searchbar input{all:unset; flex:1}
    mark{background:color-mix(in oklab, var(--brand) 35%, transparent)}

    .gallery{display:grid; grid-template-columns:repeat(auto-fill,minmax(250px,1fr)); gap:20px; margin-top:32px}
    .gallery img{aspect-ratio:1/1; object-fit:cover; border-radius:20px; border:1px solid rgba(255,255,255,.1); transition:all .35s; cursor:pointer}
    .gallery img:hover{transform:scale(1.06); box-shadow:0 20px 60px rgba(0,0,0,.4); border-color:var(--brand)}

    .hours__row{display:flex; justify-content:space-between; padding:12px 0; border-bottom:1px dashed rgba(255,255,255,.2); color:#d4d4d8; transition:all .3s ease}
    .hours__row:hover{border-bottom-color:var(--japan-gold); color:var(--text)}
    .open-indicator{font-weight:700; color:var(--japan-gold); font-size:1.1rem; text-align:center; display:block; margin-bottom:1rem}

    .access__map{width:100%; height:300px; border-radius:20px; border:1px solid rgba(255,255,255,.1); transition:all .3s ease}
    .access__map:hover{border-color:var(--brand); transform:scale(1.02)}

    footer{border-top:1px solid rgba(255,255,255,.1); color:var(--muted); padding:48px 0; margin-top:60px; text-align:center; font-size:14px; background:linear-gradient(180deg, transparent, rgba(0,0,0,.3))}

    /* Reserve bar (CVR↑) */
    .reservebar{position:fixed; left:12px; right:12px; bottom:12px; display:flex; gap:10px; justify-content:center; padding:10px; background:rgba(17,17,17,.9); border:1px solid rgba(255,255,255,.12); border-radius:14px; backdrop-filter:blur(8px); z-index:1000; padding-bottom:calc(10px + env(safe-area-inset-bottom))}
    @media(min-width:900px){ .reservebar{right:16px; left:auto; width:auto} }

    /* Fade-in */
    .fade-in{opacity:0; transform:translateY(30px); transition:all .6s ease}
    .fade-in.visible{opacity:1; transform:translateY(0)}

    /* Reduced motion */
    @media (prefers-reduced-motion:reduce){ *{animation:none!important; transition:none!important} }

    /* Mobile perf: 弱ブラー */
    @media(max-width:600px){ header{backdrop-filter:blur(8px)} .card{backdrop-filter:blur(10px)} .hero__media img{filter:brightness(.5) contrast(1.05)} }
  </style>
</head>
<body>
  <a href="#main" class="skip">本文へスキップ</a>

  <header id="header">
    <div class="container">
      <nav aria-label="主要ナビゲーション">
        <div class="brand">
          <div class="brand__logo"></div>
          <div>
            <div>居酒屋 えむら</div>
            <small style="color:var(--muted)">須坂駅前 / カウンター有り</small>
          </div>
        </div>
        <div class="nav__links">
          <a href="#about">当店について</a>
          <a href="#menu">おすすめ</a>
          <a href="#hours">営業時間</a>
          <a href="#access">アクセス</a>
          <a href="#news">お知らせ</a>
        </div>
      </nav>
    </div>
  </header>

  <main id="main">
    <!-- HERO -->
    <section class="hero" id="top">
      <div class="hero__media" aria-hidden="true">
        <img
          src="./images/building/ChatGPT Image 2025年8月24日 16_07_44.png"
          alt=""
          width="1920" height="1080"
          style="width:100%;height:100%;object-fit:cover;filter:brightness(.45) contrast(1.08);"
          fetchpriority="high" decoding="async"
        >
      </div>      
      <div class="hero__overlay" aria-hidden="true"></div>
      <div class="hero__inner">
        <h1>旬と地酒、気取らず旨い。</h1>
        <p>須坂駅から徒歩1分。地の野菜と信州の地酒をご用意しています。伝統の味と現代の洗練が融合する、新しい居酒屋体験をお届けします。</p>
        <div style="display:flex;gap:16px;flex-wrap:wrap;justify-content:center">
          <a class="cta" href="tel:026-000-0000">📞 電話で予約</a>
          <a class="cta cta--secondary" href="#menu">🍶 今日のおすすめ</a>
        </div>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" class="container">
      <h2>当店について</h2>
      <p class="lead">信州の旬を気軽に。毎朝の仕入れでメニューが少しずつ変わります。伝統の技と現代の感性が織りなす、新しい居酒屋の形をお楽しみください。</p>
      <div class="grid grid--2">
        <div class="card fade-in">
          <img src="./images/building/entrance.jpg" alt="玄関" width="1200" height="800" loading="lazy" decoding="async" />
          <div class="card__body">
            <strong style="color: var(--brand); font-size: 1.15rem;">看板料理</strong>
            <p>串焼き・おでん・信州味噌を使った一品など。日本酒は常時10種前後。職人の技が光る本格的な料理をお手頃価格で。</p>
          </div>
        </div>
        <div class="card fade-in">
          <img src="./images/menu/beer.jpg" alt="ビール" width="1200" height="800" loading="lazy" decoding="async" />
          <div class="card__body">
            <strong style="color: var(--brand); font-size: 1.15rem;">居心地</strong>
            <p>お一人様歓迎。カウンターから気軽に声をかけてください。温かみのある空間で、心からくつろげる時間をお過ごしください。</p>
          </div>
        </div>
      </div>
    </section>

    <!-- MENU -->
    <section id="menu" class="container">
      <h2>今日のおすすめ</h2>
      <p class="lead">日替りです。店内黒板もご覧ください。季節の食材を活かした、心を込めて作る料理の数々。</p>

      <!-- search -->
      <label class="searchbar" for="menuSearch" aria-label="メニューを検索">
        🔎 <input id="menuSearch" type="search" placeholder="メニューを検索（例：おでん／日本酒）" inputmode="search" />
      </label>
      <small id="searchCount" style="display:block;text-align:center;color:var(--muted)"></small>

      <div class="grid grid--2">
        <div class="fade-in">
          <div class="menu-item"><span class="menu-item__name">おでん盛り合わせ</span><span class="menu-item__price">¥780</span></div>
          <div class="menu-item"><span class="menu-item__name">信州ポテサラ</span><span class="menu-item__price">¥520</span></div>
          <div class="menu-item"><span class="menu-item__name">串焼き三種</span><span class="menu-item__price">¥690</span></div>
          <div class="menu-item"><span class="menu-item__name">季節の天ぷら</span><span class="menu-item__price">¥890</span></div>
        </div>
        <div class="fade-in">
          <div class="menu-item"><span class="menu-item__name">本日の地酒（90ml）</span><span class="menu-item__price">¥480〜</span></div>
          <div class="menu-item"><span class="menu-item__name">生ビール（中）</span><span class="menu-item__price">¥590</span></div>
          <div class="menu-item"><span class="menu-item__name">ノンアル各種</span><span class="menu-item__price">¥420〜</span></div>
          <div class="menu-item"><span class="menu-item__name">季節の梅酒</span><span class="menu-item__price">¥580</span></div>
        </div>
      </div>

      <div class="gallery">
        <img src="./images/menu/chips.jpg" alt="チップス" width="800" height="800" class="fade-in" loading="lazy" decoding="async" />
        <img src="./images/menu/lunchbox.jpg" alt="ランチボックス" width="800" height="800" class="fade-in" loading="lazy" decoding="async" />
        <img src="./images/menu/colonaBeer&amp;poakSteak.jpg" alt="コロナビールとポークステーキ" width="800" height="800" class="fade-in" loading="lazy" decoding="async" />
        <img src="./images/menu/horseMeatSashimi.jpg" alt="馬肉刺身" width="800" height="800" class="fade-in" loading="lazy" decoding="async" />
      </div>      

      <!-- Lightbox -->
      <dialog id="lightbox" style="padding:0;border:none;background:#000">
        <img id="lightboxImg" alt="" style="max-width:100vw;max-height:100vh;display:block">
      </dialog>
    </section>

    <!-- HOURS -->
    <section id="hours" class="container">
      <h2>営業時間</h2>
      <p class="lead"><span id="openIndicator" class="open-indicator" aria-live="polite">—</span></p>
      <div class="hours">
        <div class="hours__row fade-in"><span>月</span><span data-hours="17:00-23:00">17:00–23:00</span></div>
        <div class="hours__row fade-in"><span>火</span><span data-hours="17:00-23:00">17:00–23:00</span></div>
        <div class="hours__row fade-in"><span>水</span><span data-hours="17:00-23:00">17:00–23:00</span></div>
        <div class="hours__row fade-in"><span>木</span><span data-hours="17:00-23:00">17:00–23:00</span></div>
        <div class="hours__row fade-in"><span>金</span><span data-hours="17:00-24:00">17:00–24:00</span></div>
        <div class="hours__row fade-in"><span>土</span><span data-hours="16:00-24:00">16:00–24:00</span></div>
        <div class="hours__row fade-in"><span>日</span><span data-hours="定休">定休</span></div>
      </div>
    </section>

    <!-- ACCESS -->
    <section id="access" class="container">
      <h2>アクセス</h2>
      <p class="lead">長野県須坂市馬場町123-4 シルキー2F（須坂駅 徒歩1分）</p>
      <div class="grid grid--2">
        <div class="fade-in">
          <ul style="list-style:none; padding:0; margin:0">
            <li style="margin-bottom:1rem; padding:1rem; background:rgba(255,255,255,.05); border-radius:12px; border-left:4px solid var(--brand)"><strong>住所：</strong><address style="display:inline; margin:0">長野県須坂市馬場町123-4 シルキー2F</address></li>
            <li style="margin-bottom:1rem; padding:1rem; background:rgba(255,255,255,.05); border-radius:12px; border-left:4px solid var(--accent)"><strong>電話：</strong><a href="tel:026-000-0000" style="color:var(--brand)">026-000-0000</a></li>
            <li style="margin-bottom:1rem; padding:1rem; background:rgba(255,255,255,.05); border-radius:12px; border-left:4px solid var(--japan-gold)"><strong>支払い：</strong>現金 / 各種クレジット / 交通系IC</strong></li>
          </ul>
        </div>
        <div class="fade-in">
          <iframe class="access__map" title="地図" loading="lazy" allowfullscreen src="https://maps.google.com/maps?q=須坂駅&t=&z=16&ie=UTF8&iwloc=&output=embed"></iframe>
        </div>
      </div>
    </section>

    <!-- NEWS -->
    <section id="news" class="container">
      <h2>お知らせ</h2>
      <p class="lead">臨時休業や季節メニューのご案内はこちら。最新情報をお見逃しなく。</p>
      <div class="card fade-in"><div class="card__body" id="newsList">
        <article>
          <time datetime="2025-08-01">2025/08/01</time>
          <strong>お盆期間の営業について</strong>
          <p>8/13〜8/15は22:00閉店とさせていただきます。ご不便をおかけしますが、ご理解いただけますと幸いです。</p>
        </article>
        <article>
          <time datetime="2025-07-25">2025/07/25</time>
          <strong>夏季限定メニュー登場</strong>
          <p>冷やしおでん、夏野菜の天ぷらなど、涼しげな夏メニューが登場しました。ぜひお試しください。</p>
        </article>
      </div></div>
    </section>
  </main>

  <footer>
    <div class="container">
      <small>© <span id="year"></span> 居酒屋 えむら - 伝統と革新が織りなす、新しい居酒屋体験</small>
    </div>
  </footer>

  <!-- 予約バー（モバイル最適）-->
  <div class="reservebar" role="region" aria-label="予約バー">
    <a class="cta" href="tel:026-000-0000">今すぐ電話</a>
    <a class="cta cta--secondary" href="#menu">メニュー</a>
  </div>

  <!-- JSON-LD: Restaurant -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Restaurant",
    "name":"居酒屋 えむら",
    "address":{"@type":"PostalAddress","addressRegion":"長野県","addressLocality":"須坂市","streetAddress":"馬場町123-4 シルキー2F"},
    "telephone":"+81-26-000-0000",
    "url":"https://m3adam.github.io/izakaya-site/",
    "servesCuisine":["Izakaya","Japanese"],
    "priceRange":"¥¥",
    "openingHoursSpecification":[
      {"@type":"OpeningHoursSpecification","dayOfWeek":["Monday","Tuesday","Wednesday","Thursday"],"opens":"17:00","closes":"23:00"},
      {"@type":"OpeningHoursSpecification","dayOfWeek":["Friday"],"opens":"17:00","closes":"24:00"},
      {"@type":"OpeningHoursSpecification","dayOfWeek":["Saturday"],"opens":"16:00","closes":"24:00"}
    ]
  }
  </script>

  <script>
    // 年表示
    document.getElementById('year').textContent = new Date().getFullYear();

    // ヘッダーのスクロール効果
    window.addEventListener('scroll', () => {
      const header = document.getElementById('header');
      header.classList.toggle('scrolled', window.scrollY > 100);
    });

    // スクロールアニメーション
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('visible'); });
    }, {threshold:0.1, rootMargin:'0px 0px -50px 0px'});
    document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));

    // いま営業中（深夜跨ぎ対応）
    (function(){
      const el = document.getElementById('openIndicator');
      const now = new Date(); const d = now.getDay();
      const rows = Array.from(document.querySelectorAll('#hours .hours__row'));
      const map = {1:0,2:1,3:2,4:3,5:4,6:5,0:6};
      const row = rows[map[d]]; if(!row) return;
      const text = row.querySelector('[data-hours]')?.dataset.hours || '';
      if(text.includes('定休')){ el.textContent = '本日定休です'; return; }
      const toMin = t => { const [h,m] = t.split(':').map(Number); return h*60 + (m||0); };
      let [s,e] = text.split('-'); let open = toMin(s), close = toMin(e==='24:00'?'23:59':e);
      if(close <= open) close += 1440; // pass midnight
      const nowMin = now.getHours()*60 + now.getMinutes();
      const adj = nowMin < open ? nowMin + 1440 : nowMin;
      const openNow = adj >= open && adj <= close;
      el.textContent = openNow ? 'いま営業中です' : `本日営業は ${s}〜${e}`;
    })();

    // スムーズスクロール（手動）
    document.querySelectorAll('a[href^="#"]').forEach(a => {
      a.addEventListener('click', e => {
        const id = a.getAttribute('href');
        if(id.length > 1){ e.preventDefault(); document.querySelector(id)?.scrollIntoView({behavior:'smooth', block:'start'}); }
      });
    });

    // メニュー検索＋ハイライト
    (() => {
      const q = document.getElementById('menuSearch');
      const rows = Array.from(document.querySelectorAll('#menu .menu-item'));
      const counter = document.getElementById('searchCount');
      const esc = s => s.replace(/[.*+?^${}()|[\]\\]/g,'\\$&');
      const hi = (el, k) => {
        const n = el.querySelector('.menu-item__name');
        const base = n.dataset.base || n.textContent; n.dataset.base = base;
        if(!k){ n.innerHTML = base; return; }
        n.innerHTML = base.replace(new RegExp(`(${esc(k)})`,'ig'),'<mark>$1</mark>');
      };
      q.addEventListener('input', () => {
        const k = q.value.trim().toLowerCase(); let cnt=0;
        rows.forEach(r => {
          const ok = !k || r.textContent.toLowerCase().includes(k);
          r.style.display = ok ? '' : 'none'; if(ok){ cnt++; hi(r, k); }
        });
        counter.textContent = k ? `${cnt} 件ヒット` : '';
      });
    })();

    // ライトボックス（dialog）
    (() => {
      const dlg = document.getElementById('lightbox');
      const img = document.getElementById('lightboxImg');
      document.querySelectorAll('.gallery img').forEach(th => {
        th.addEventListener('click', () => { img.src = th.src; img.alt = th.alt; dlg.showModal(); });
      });
      dlg.addEventListener('click', e => { if(e.target === dlg) dlg.close(); });
    })();

    // PWA: Service Worker 登録（準備ができたら sw.js を用意）
    if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('sw.js', { scope: './' })
        .catch(console.error);
    });
  }
  </script>
</body>
</html>
